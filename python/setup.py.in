from distutils.core import setup, Extension
from distutils.sysconfig import get_config_var
from Cython.Build import cythonize
import os

dataFiles = []

exts = cythonize("ember/_ember.pyx")
exts[0].include_dirs += @py_include_dirs@
exts[0].libraries += @py_libraries@
exts[0].library_dirs += @py_libdirs@

if os.name == 'nt':
    scripts = ['scripts/ember-script.pyw',
               'scripts/ember.exe']
    for f in os.listdir('ember'):
        # Expect to find: tbb
        if f.lower().endswith('.dll'):
            dataFiles.append(f)
else:
    scripts = ['scripts/ember']

setup(name='Ember',
      version='1.1.0',
      description='Multipurpose 1D Flame Solver',
      long_description='',
      author='Raymond L. Speth',
      author_email='speth@mit.edu',
      url='http://github.com/speth/ember',
      packages = ['ember',
                  'ember.data',
                  'ember.examples'],
      ext_modules=exts,
      scripts=scripts,
      package_data = {'ember': dataFiles,
                      'ember.data': ['*.*'],
                      'ember.examples': ['*.*']})
